<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>ุจูุชูููู ูุงุด - ุงูุฑุฆูุณูุฉ</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>๐ฐ ุจูุชูููู ูุงุด</h1>
    <p>ูููุน ุงุณุชุซูุงุฑ ูุฑุจุญ ูู ูุดุงูุฏุฉ ุงูุฅุนูุงูุงุช</p>
  </header>

  <main>
    <section class="card">
      <h2>ุชุณุฌูู ุงูุฏุฎูู / ุฅูุดุงุก ุญุณุงุจ</h2>
      <form id="auth-form">
        <label>ุงูุฅูููู</label>
        <input type="email" id="email" required />
        <label>ูููุฉ ุงููุฑูุฑ</label>
        <input type="password" id="password" required />
        <div class="row">
          <button type="button" id="login-btn">ุชุณุฌูู ุฏุฎูู</button>
          <button type="button" id="signup-btn" class="secondary">ุฅูุดุงุก ุญุณุงุจ</button>
        </div>
      </form>
      <p id="auth-status" class="status"></p>
    </section>

    <section class="card">
      <h2>ุดุญู ูุจุงุดุฑ (ุจุงูุฏููุงุฑ)</h2>
      <div class="quick-topup">
        <button data-amount="10">$10</button>
        <button data-amount="50">$50</button>
        <button data-amount="100">$100</button>
        <button data-amount="200">$200</button>
        <button data-amount="500">$500</button>
      </div>
      <p class="hint">ุนูุฏ ุงุฎุชูุงุฑ ูุจูุบ ุงูุดุญู ุณูุชู ูููู ุฅูู ุตูุญุฉ ุฅุซุจุงุช ุงูุฏูุน ูุฅุฑุณุงู ุตูุฑุฉ ุงูุชุญููู.</p>
    </section>
  </main>

  <nav class="bottom-nav">
    <a href="profile.html">๐ค ุงูููู ุงูุดุฎุตู</a>
    <a href="ads.html">๐บ ุงูุฅุนูุงูุงุช</a>
    <a href="wallet.html">๐ผ ูุญูุธุชู</a>
    <a href="about.html">โน๏ธ ูู ูุญู</a>
  </nav>

  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script src="supabase.js"></script>
  <script>
    const emailEl = document.getElementById('email');
    const passEl = document.getElementById('password');
    const statusEl = document.getElementById('auth-status');

    async function doSignup() {
      statusEl.textContent = 'ุฌุงุฑู ุฅูุดุงุก ุงูุญุณุงุจ...';
      const { data, error } = await supabase.auth.signUp({
        email: emailEl.value,
        password: passEl.value,
      });
      if (error) {
        statusEl.textContent = 'ุฎุทุฃ: ' + error.message;
      } else {
        statusEl.textContent = 'ุชู ุฅูุดุงุก ุงูุญุณุงุจุ ุชุฃูุฏ ูู ุงูุฅูููู ุซู ุณุฌู ุงูุฏุฎูู.';
      }
    }

    async function doLogin() {
      statusEl.textContent = 'ุฌุงุฑู ุชุณุฌูู ุงูุฏุฎูู...';
      const { data, error } = await supabase.auth.signInWithPassword({
        email: emailEl.value,
        password: passEl.value,
      });
      if (error) {
        statusEl.textContent = 'ุฎุทุฃ: ' + error.message;
      } else {
        statusEl.textContent = 'ุชู ุชุณุฌูู ุงูุฏุฎูู โ';
      }
    }

    document.getElementById('signup-btn').onclick = doSignup;
    document.getElementById('login-btn').onclick = doLogin;

    // ุฃุฒุฑุงุฑ ุงูุดุญู
    document.querySelectorAll('.quick-topup button').forEach(btn => {
      btn.addEventListener('click', () => {
        const amount = btn.dataset.amount;
        // ุงูุงูุชูุงู ุฅูู ุตูุญุฉ ุฅุซุจุงุช ุงูุฏูุน ูุน ุงููุจูุบ
        window.location.href = 'payment-proof.html?amount=' + amount;
      });
    });
  </script>
</body>
</html>
